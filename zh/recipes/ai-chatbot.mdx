---
title: åˆ›å»º AI èŠå¤©æœºå™¨äºº
description: è®©æˆ‘ä»¬ä½¿ç”¨ SuperStarter åˆ›å»ºä¸€ä¸ªç®€å•çš„ AI èŠå¤©æœºå™¨äººã€‚
---

ä»Šå¤©æˆ‘ä»¬å°†ä½¿ç”¨ SuperStarter å’Œå†…ç½®çš„ AI åŒ…æ¥åˆ›å»ºä¸€ä¸ª AI èŠå¤©æœºå™¨äººï¼Œè¯¥åŒ…ç”± [Vercel AI SDK](https://sdk.vercel.ai/) æä¾›æ”¯æŒã€‚

<Frame>
  <img src="/images/ai-chatbot.png" style={{ borderRadius: '0.5rem' }} />
</Frame>

## 1. åˆ›å»ºæ–°é¡¹ç›®

```bash Terminal
npx super-starter@latest init ai-chatbot
```

è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º `ai-chatbot` çš„æ–°é¡¹ç›®å¹¶å®‰è£…å¿…è¦çš„ä¾èµ–é¡¹ã€‚

## 2. é…ç½®ç¯å¢ƒå˜é‡

æŒ‰ç…§[ç¯å¢ƒå˜é‡](/zh/env)æŒ‡å—å¡«å†™æ‚¨çš„ç¯å¢ƒå˜é‡ã€‚

ç‰¹åˆ«è¦ç¡®ä¿è®¾ç½® `OPENAI_API_KEY` ç¯å¢ƒå˜é‡ã€‚

<Tip>ç¡®ä¿æ‚¨çš„ OpenAI è´¦æˆ·ä¸­æœ‰è¶³å¤Ÿçš„é¢åº¦ã€‚</Tip>

## 3. åˆ›å»ºèŠå¤©æœºå™¨äºº UI

æˆ‘ä»¬å°†ä»åˆ›å»ºä¸€ä¸ªç®€å•çš„èŠå¤©æœºå™¨äºº UI å¼€å§‹ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†å’Œä¸€ä¸ªå‘é€æ¶ˆæ¯çš„æŒ‰é’®ã€‚

åœ¨ `app/components` ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `Chatbot` çš„æ–°æ–‡ä»¶ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å‡ ä¸ªç»„ä»¶ï¼š

- `useChat` æ¥è‡ªæˆ‘ä»¬çš„ AI åŒ…ï¼Œç”¨äºå¤„ç†èŠå¤©é€»è¾‘ã€‚
- `Button` å’Œ `Input` ç»„ä»¶æ¥è‡ªæˆ‘ä»¬çš„è®¾è®¡ç³»ç»Ÿï¼Œç”¨äºæ¸²æŸ“è¡¨å•ã€‚
- `Thread` å’Œ `Message` ç»„ä»¶æ¥è‡ªæˆ‘ä»¬çš„ AI åŒ…ï¼Œç”¨äºæ¸²æŸ“èŠå¤©å†å²ã€‚
- `handleError` æ¥è‡ªæˆ‘ä»¬çš„è®¾è®¡ç³»ç»Ÿï¼Œç”¨äºå¤„ç†é”™è¯¯ã€‚
- `SendIcon` æ¥è‡ª `lucide-react`ï¼Œç”¨äºåˆ›å»ºå‘é€å›¾æ ‡ã€‚

```tsx apps/app/app/(authenticated)/components/chatbot.tsx
'use client';

import { Message } from '@repo/ai/components/message';
import { Thread } from '@repo/ai/components/thread';
import { useChat } from '@repo/ai/lib/react';
import { Button } from '@repo/design-system/components/ui/button';
import { Input } from '@repo/design-system/components/ui/input';
import { handleError } from '@repo/design-system/lib/utils';
import { SendIcon } from 'lucide-react';

export const Chatbot = () => {
  const { messages, input, handleInputChange, isLoading, handleSubmit } =
    useChat({
      onError: handleError,
      api: '/api/chat',
    });

  return (
    <div className="flex h-[calc(100vh-64px-16px)] flex-col divide-y overflow-hidden">
      <Thread>
        {messages.map((message) => (
          <Message key={message.id} data={message} />
        ))}
      </Thread>
      <form
        onSubmit={handleSubmit}
        className="flex shrink-0 items-center gap-2 px-8 py-4"
        aria-disabled={isLoading}
      >
        <Input
          placeholder="é—®ç‚¹ä»€ä¹ˆå§ï¼"
          value={input}
          onChange={handleInputChange}
        />
        <Button type="submit" size="icon" disabled={isLoading}>
          <SendIcon className="h-4 w-4" />
        </Button>
      </form>
    </div>
  );
};
```

## 4. åˆ›å»ºèŠå¤©æœºå™¨äºº API è·¯ç”±

åœ¨ `app/api` ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `chat` çš„æ–°æ–‡ä»¶ã€‚è¿™ä¸ª Next.js è·¯ç”±å¤„ç†ç¨‹åºå°†å¤„ç†èŠå¤©æœºå™¨äººçš„å“åº”ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨ AI åŒ…ä¸­çš„ `streamText` å‡½æ•°å°†èŠå¤©æœºå™¨äººçš„å“åº”æµå¼ä¼ è¾“åˆ°å®¢æˆ·ç«¯ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨ AI åŒ…ä¸­çš„ `provider` å‡½æ•°æ¥è·å– OpenAI æä¾›è€…ï¼Œä»¥åŠ Observability åŒ…ä¸­çš„ `log` å‡½æ•°æ¥è®°å½•èŠå¤©æœºå™¨äººçš„å“åº”ã€‚

```tsx apps/app/app/api/chat/route.ts
import { streamText } from '@repo/ai';
import { log } from '@repo/observability/log';
import { models } from '@repo/ai/lib/models';

export const POST = async (req: Request) => {
  const body = await req.json();

  log.info('ğŸ¤– æ”¶åˆ°èŠå¤©è¯·æ±‚ã€‚', { body });
  const { messages } = body;

  log.info('ğŸ¤– ç”Ÿæˆå“åº”ä¸­...');
  const result = streamText({
    model: models.chat,
    system: 'ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„åŠ©æ‰‹ã€‚',
    messages,
  });

  log.info('ğŸ¤– æµå¼ä¼ è¾“å“åº”ä¸­...');
  return result.toDataStreamResponse();
};
```

## 5. æ›´æ–°åº”ç”¨

æœ€åï¼Œæˆ‘ä»¬å°†æ›´æ–° `app/page.tsx` æ–‡ä»¶ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªç®€å•çš„å…¥å£ç‚¹ï¼Œç”¨äºæ¸²æŸ“èŠå¤©æœºå™¨äºº UIã€‚

```tsx apps/app/app/(authenticated)/page.tsx
import { auth } from '@repo/auth/server';
import type { Metadata } from 'next';
import { notFound } from 'next/navigation';
import { Chatbot } from './components/chatbot';
import { Header } from './components/header';

const title = 'Acme Inc';
const description = 'æˆ‘çš„åº”ç”¨ã€‚';

export const metadata: Metadata = {
  title,
  description,
};

const App = async () => {
  const { orgId } = await auth();

  if (!orgId) {
    notFound();
  }

  return (
    <>
      <Header pages={['æ„å»ºæ‚¨çš„åº”ç”¨']} page="AI èŠå¤©æœºå™¨äºº" />
      <Chatbot />
    </>
  );
};

export default App;
```

## 6. è¿è¡Œåº”ç”¨

è¿è¡Œåº”ç”¨å¼€å‘æœåŠ¡å™¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨ [http://localhost:3000](http://localhost:3000) çœ‹åˆ°èŠå¤©æœºå™¨äºº UIã€‚

```sh Terminal
pnpm dev --filter app
```

å°±æ˜¯è¿™æ ·ï¼æ‚¨ç°åœ¨å·²ç»ä½¿ç”¨ SuperStarter å’Œå†…ç½®çš„ AI åŒ…åˆ›å»ºäº†ä¸€ä¸ª AI èŠå¤©æœºå™¨äººã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ [Twitter](https://x.com/allentown521) ä¸Šè”ç³»æˆ‘æˆ–åœ¨ [GitHub](https://github.com/focusapps/SuperStarter) ä¸Šæå‡ºé—®é¢˜ã€‚
